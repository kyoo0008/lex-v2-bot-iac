anthropic_version: bedrock-2023-05-31
messages:
  - role: user
    content: |
        Here is a conversation between a customer support agent and a customer:
    
        <conversation>
        {{$.transcript}}
        </conversation>
    
        And here is the current credit card the customer has
        <productId>
        {{$.Custom.productId}}
        </productId>
        
        And here is the customers current credit score
        
        <creditScore>
        {{$.Custom.creditScore}}
        </creditScore>
        
        And here is the customers spending profile
        
        <spendingProfile>
        {{$.Custom.spendingProfile}}
        </spendingProfile>
        
        Please read through the full conversation carefully. Based on the dialogue: Imagine you are the customer support agent and you need to search the company's knowledge base to find a relevant article to help solve the customer's issue. Think carefully about the key details and specifics of the customer's problem. In <query> tags, summarize the issue the customer is facing at the end of the conversation. Include as much detail as possible. Also, attach the key utterances from the conversation that the summary is mainly based on.
        
        Use the following output format:
        <query> the summary of the customer issue and key utterances </query>, and don't output anything else.
